(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{105:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authentication=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(46)),r=a(32),c=a(56);t.authentication=function(){return n.default.get(r.requestURL+"user/authentication"+(c.ISIE?"?token="+Date.now():""))}},123:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotFound=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(1));a(418);t.NotFound=function(e){return n.default.createElement("div",{className:"not_container"},"keyword"===e.searchType?n.default.createElement("h1",{className:"not_description"},"抱歉，未找到与",n.default.createElement("span",{className:"not_keyword"},e.keyword),"相关的内容~"):n.default.createElement("h1",{className:"not_description"},"抱歉，",n.default.createElement("span",{className:"not_keyword"},e.keyword),"分类下暂无内容~"))}},140:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ADD_PAGE="add_page",t.UPDATE_ARTICLES_IN_SEARCH="update_articles_in_search",t.CHANGE_KEYWORD="change_keyword",t.CHANGE_SEARCH_RESULT_SHOW="change_search_result_show",t.CHANGE_HAS_MORE="change_has_more"},142:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DumbList=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(1)),r=a(38);a(745);t.DumbList=function(e){return n.default.createElement("section",{className:"articlelist_container"},n.default.createElement("ul",{className:"articlelist_list"},e.articlelist.map(function(e,t){return n.default.createElement("li",{className:"articlelist_Item",key:t},n.default.createElement("div",{className:"articlelist_summary"},n.default.createElement(r.Link,{to:"/detail/"+e.get("articleId"),className:"summary_title",target:"_blank"},e.get("articleName")),n.default.createElement("p",{className:"summary_content"},e.get("description")),n.default.createElement("div",{className:"summary_extraInfo"},n.default.createElement("a",{className:"extraInfo_author",target:"_blank"},e.get("nickname")),n.default.createElement("span",{className:"extraInfo_comments",target:"_blank"},n.default.createElement("span",{className:"iconfont icon-duihuakuang1"},"创作于",e.get("createTime"))),e.get("updateTime")?n.default.createElement("span",{className:"extraInfo_likes"},n.default.createElement("span",{className:"iconfont icon-xin"},"更新于",e.get("updateTime"))):null)))})),e.hasMore?n.default.createElement("a",{className:"articlelist_loadmore",onClick:function(){e.loadmore(e.requestPage)}},"阅读更多"):n.default.createElement("a",{className:"articlelist_loadmore"},"没有更多啦！"))}},144:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constants=t.actionCreators=t.reducer=void 0;var n=a(354),r=o(a(355)),c=o(a(140));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.reducer=n.reducer,t.actionCreators=r,t.constants=c},261:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(21)),r=h(a(5)),c=h(a(8)),o=h(a(4)),u=h(a(6)),s=h(a(1)),l=h(a(76)),i=a(123),d=a(26),f=a(142),_=a(144);function h(e){return e&&e.__esModule?e:{default:e}}a(419);var m=function(e){function t(){return(0,r.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.props.loadmore(this.props.requestPage),this.props.changeKeyword()}},{key:"render",value:function(){return s.default.createElement(s.default.Fragment,null,s.default.createElement(l.default,null),s.default.createElement("section",{className:"search_container"},this.props.showSearchResult?s.default.createElement(s.default.Fragment,null,"keyword"===this.props.searchType?s.default.createElement("h1",{className:"search_h1"},"为您列出关键字是",s.default.createElement("span",null,this.props.keyword),"的搜索结果："):s.default.createElement("h1",{className:"search_h1"},"为您列出",s.default.createElement("span",null,this.props.keyword),"分类下的文章："),s.default.createElement(f.DumbList,this.props)):s.default.createElement(i.NotFound,{keyword:this.props.keyword,searchType:this.props.searchType})))}}]),t}(s.default.Component);t.default=(0,d.connect)(function(e){return{articlelist:e.getIn(["search","articlelist"]),requestPage:e.getIn(["search","nextPage"]),showSearchResult:e.getIn(["search","showSearchResult"]),keyword:e.getIn(["search","keyword"]),searchType:e.getIn(["search","searchType"]),hasMore:e.getIn(["search","hasMore"])}},function(e){return{loadmore:function(t){e(_.actionCreators.searchAsyncAC(t))},changeKeyword:function(){var t=decodeURI(location.search),a=t.match(/^\?(keyword|category)/i)[1];e(_.actionCreators.changeKeywordAndTypeAC(a,t.slice(t.indexOf("=")+1)))}}})(m)},267:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var n=a(33),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(82));var c=(0,n.fromJS)({focused:!1,mouseIn:!1,list:[],page:1,totalPage:1,searchValue:""});t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case r.SEARCH_FOCUS:return e.set("focused",!0);case r.SEARCH_BLUR:return e.set("focused",!1);case r.CHANGE_LIST:return e.merge({list:t.data,totalPage:t.totalPage});case r.MOUSE_ENTER:return e.set("mouseIn",!0);case r.MOUSE_LEAVE:return e.set("mouseIn",!1);case r.SWITCH_PAGE:return e.set("page",t.nextPage);case r.CHANGE_SEARCHVALUE:return e.set("searchValue",t.value);default:return e}}},268:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeSearchValue=t.logout=t.switchPage=t.mouseLeave=t.mouseEnter=t.getList=t.search_focus_blur_action=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(46)),r=a(33),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(82)),o=a(60),u=a(32),s=a(56);t.search_focus_blur_action=function(e){return{type:e}},t.getList=function(){return function(e){n.default.get(u.requestURL+"api/getList").then(function(t){var a=t.data,n=a.success,o=a.data;n&&e(function(e){return{type:c.CHANGE_LIST,data:(0,r.fromJS)(e),totalPage:Math.ceil(e.length/10)}}(o))}).catch(function(e){console.log(e)})}},t.mouseEnter=function(){return{type:c.MOUSE_ENTER}},t.mouseLeave=function(){return{type:c.MOUSE_LEAVE}},t.switchPage=function(e){return{type:c.SWITCH_PAGE,nextPage:e}},t.logout=function(){return function(e){n.default.get(u.requestURL+"user/logout"+(s.ISIE?"?token="+Date.now():"")).then(function(t){t.data.code&&e(o.actionCreators.changeLoginStatus(!1))}).catch(function(e){console.log(e)})}},t.changeSearchValue=function(e){return{type:c.CHANGE_SEARCHVALUE,value:e}}},269:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var n=u(a(96)),r=u(a(141)),c=a(33),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(83));function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,c.fromJS)({loginStatus:!1,msg:"",id:0,nickname:"",userInfo:{username:"",password:"",remember:!0}});t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case o.CHANGE_USER_INFO:var a=!0,c=!1,u=void 0;try{for(var l,i=(0,n.default)(t.userData);!(a=(l=i.next()).done);a=!0){var d=l.value,f=(0,r.default)(d,2),_=f[0],h=f[1];return e.setIn(["userInfo",_],h)}}catch(e){c=!0,u=e}finally{try{!a&&i.return&&i.return()}finally{if(c)throw u}}break;case o.CHANGE_LOGIN_STATUS:return e.set("loginStatus",t.status);case o.CHANGE_MSG:return e.set("msg",t.msg);case o.CHANGE_LOGGED_USER_INFO:return e.merge({id:t.id,nickname:t.nickname});default:return e}}},270:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeLoggedUserInfo=t.changeMsg=t.changeLoginStatus=t.loginFunctionalAC=t.changeUserInfo=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(83)),r=a(33),c=function(e){return e&&e.__esModule?e:{default:e}}(a(46)),o=a(32);c.default.defaults.withCredentials=!0;var u=function(e){return{type:n.CHANGE_LOGIN_STATUS,status:e}},s=function(e){return{type:n.CHANGE_MSG,msg:e}},l=function(e,t){return{type:n.CHANGE_LOGGED_USER_INFO,id:e,nickname:t}};t.changeUserInfo=function(e){return{type:n.CHANGE_USER_INFO,userData:(0,r.fromJS)(e)}},t.loginFunctionalAC=function(e){return function(t){c.default.post(o.requestURL+"user/login",e).then(function(e){var a=e.data,n=a.success,r=a.code,c=a.id,o=a.nickname;if(n)switch(r){case 0:t(s("登录成功！")),t(u(!0)),t(l(c,o));break;case 1:t(s("用户名不存在"));break;case 2:t(s("密码错误"))}}).catch()}},t.changeLoginStatus=u,t.changeMsg=s,t.changeLoggedUserInfo=l},271:function(e,t,a){e.exports=a.p+"85d0b383f3f98315786cac9d7bcf14bf.jpg"},32:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.requestURL="http://www.herosanctuary.com/"},354:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var n=a(33),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(140));var c=(0,n.fromJS)({articlelist:[],nextPage:0,showSearchResult:!0,hasMore:!0,keyword:"",searchType:"keyword"});t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case r.ADD_PAGE:return e.set("nextPage",t.page);case r.UPDATE_ARTICLES_IN_SEARCH:return e.set("articlelist",e.get("articlelist").concat((0,n.fromJS)(t.articles)));case r.CHANGE_KEYWORD:return e.merge({searchType:t.searchType,keyword:t.keyword});case r.CHANGE_SEARCH_RESULT_SHOW:return e.set("showSearchResult",t.showSearchResult);case r.CHANGE_HAS_MORE:return e.set("hasMore",t.hasMore);default:return e}}},355:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeKeywordAndTypeAC=t.searchAsyncAC=void 0;var n=s(a(2)),r=s(a(96)),c=s(a(46)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(140)),u=a(32);function s(e){return e&&e.__esModule?e:{default:e}}t.searchAsyncAC=function(e){return function(t){c.default.get(u.requestURL+"search/search"+location.search+"&page="+e).then(function(a){var c=a.data,u=c.code,s=c.articles,l=c.usersWithoutRepeat;switch(u){case 1:var i=s.map(function(e){var t=!0,a=!1,c=void 0;try{for(var o,u=(0,r.default)(l);!(t=(o=u.next()).done);t=!0){var s=o.value,i=s.id,d=s.nickname;if(void 0===e.nickname&&e.authorId===i)return(0,n.default)({},e,{nickname:d})}}catch(e){a=!0,c=e}finally{try{!t&&u.return&&u.return()}finally{if(a)throw c}}});t(function(e){return{type:o.UPDATE_ARTICLES_IN_SEARCH,articles:e}}(i));break;case 0:0===e&&t(function(e){return{type:o.CHANGE_SEARCH_RESULT_SHOW,showSearchResult:e}}(!1)),t(function(e){return{type:o.CHANGE_HAS_MORE,hasMore:e}}(!1))}}).catch(function(e){console.log(e)}),t(function(e,t){return{type:o.ADD_PAGE,page:e+t}}(e,1))}},t.changeKeywordAndTypeAC=function(e,t){return{type:o.CHANGE_KEYWORD,searchType:e,keyword:t}}},418:function(e,t){},419:function(e,t){},56:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=window.navigator.userAgent.indexOf("MSIE 9.0")>0,r=window.navigator.userAgent.indexOf("Trident")>0;t.ISIE=r,t.ISIE9=n},60:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constants=t.actionCreators=t.reducer=void 0;var n=a(269),r=o(a(270)),c=o(a(83));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.reducer=n.reducer,t.actionCreators=r,t.constants=c},738:function(e,t){},745:function(e,t){},76:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(348)),r=v(a(21)),c=v(a(5)),o=v(a(8)),u=v(a(4)),s=v(a(6)),l=v(a(1)),i=a(38),d=a(26),f=a(349),_=a(95),h=a(60),m=a(105),p=a(56);a(738);var g=v(a(271)),E=a(32);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){var e,a,n,o;(0,c.default)(this,t);for(var s=arguments.length,d=Array(s),f=0;f<s;f++)d[f]=arguments[f];return a=n=(0,u.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(d))),n.showSearch=function(){var e=n.props,t=e.focused,a=e.mouseIn,r=e.list,c=e.page,o=e.totalPage,u=e.handleMouseEnter,s=e.handleMouseLeave,d=e.handleSwitchClick,f=r.toJS(),_=[];if(f.length)for(var h=10*(c-1);h<(c<o?10*c:f.length);h++)_.push(l.default.createElement("li",{className:"contentItem",key:f[h]},l.default.createElement(i.Link,{className:"contentItem_link",to:{pathname:"/search",search:"keyword="+(p.ISIE?encodeURIComponent(f[h]):f[h])},target:"_blank"},f[h])));return t||a?l.default.createElement("div",{className:"search_info",onMouseEnter:u,onMouseLeave:s},l.default.createElement("div",{className:"search_wrapper"},l.default.createElement("div",{className:"title"},l.default.createElement("span",{className:"hot"},"热门搜索"),l.default.createElement("a",{className:"switch",onClick:function(){d(c,o,n.spinIcon)}},l.default.createElement("i",{ref:function(e){n.spinIcon=e},className:"iconfont icon-spinner9 spin"}),l.default.createElement("span",null,"换一批"))),l.default.createElement("ul",{className:"content"},_))):null},o=a,(0,u.default)(n,o)}return(0,s.default)(t,e),(0,o.default)(t,[{key:"componentWillMount",value:function(){this.props.checkLogin()}},{key:"render",value:function(){var e=this.props,t=e.loginStatus,a=e.focused,n=e.list,r=e.handleInputFoucus,c=e.handleInputBlur,o=e.logout,u=e.searchValue,s=e.handleSearchChange,d=e.handleInputKeyDown,_=e.handleSearchClick;return l.default.createElement("header",{className:"header"},l.default.createElement("nav",{className:"nav_container"},l.default.createElement("ul",{className:"nav"},l.default.createElement("li",null,l.default.createElement(i.Link,{className:"logo",to:"/",title:"返回新崔斯特姆"},l.default.createElement("img",{src:g.default,className:"logoPic",alt:"返回新崔斯特姆"}))),l.default.createElement("li",{className:"nav_padding"}),l.default.createElement("li",{className:"nav_middle"},l.default.createElement("div",{className:"nav_search_container"},l.default.createElement("div",{className:"inputWrapper"},l.default.createElement(f.CSSTransition,{in:a,timeout:300,classNames:"slide"},l.default.createElement("input",{placeholder:"搜索",onFocus:function(){r(n)},onBlur:c,value:u,onChange:s,onKeyDown:function(e){d(e,u)}})),l.default.createElement(f.CSSTransition,{in:a,timeout:300,classNames:"fade"},l.default.createElement("a",{className:"search_btn",href:"/search?keyword="+(p.ISIE?encodeURIComponent(u):u),onClick:function(e){_(e,u)},target:"_blank"},l.default.createElement("i",{className:"iconfont icon-fangdajing"})))),this.showSearch(a))),l.default.createElement("li",{className:"nav_right"},t?l.default.createElement("a",{onClick:o,className:"login"},"退出"):l.default.createElement(i.Link,{to:"/login",className:"login"},"登录"),t?null:l.default.createElement(i.Link,{className:"signUp",to:"/sign_up"},"注册"),l.default.createElement(i.Link,{className:"write",to:"/write"},l.default.createElement("i",{className:"iconfont icon-icon-checkin"}),"写文章")))))}}]),t}(l.default.Component);t.default=(0,d.connect)(function(e){return{focused:e.getIn(["header","focused"]),list:e.getIn(["header","list"]),page:e.getIn(["header","page"]),totalPage:e.getIn(["header","totalPage"]),mouseIn:e.getIn(["header","mouseIn"]),searchValue:e.getIn(["header","searchValue"]),loginStatus:e.getIn(["login","loginStatus"])}},function(e){return{handleInputFoucus:function(t){0===t.size&&e(_.actionCreators.getList()),e(_.actionCreators.search_focus_blur_action(_.constants.SEARCH_FOCUS))},handleInputBlur:function(){e(_.actionCreators.search_focus_blur_action(_.constants.SEARCH_BLUR))},handleMouseEnter:function(){e(_.actionCreators.mouseEnter())},handleMouseLeave:function(){e(_.actionCreators.mouseLeave())},handleSwitchClick:function(t,a,r){var c=r.style.transform?r.style.transform.replace(/\D/gi,""):0;c=c?(0,n.default)(c,10):0,r.style.transform="rotate("+(360+c)+"deg)",e(t<a?_.actionCreators.switchPage(t+1):_.actionCreators.switchPage(1))},checkLogin:function(){(0,m.authentication)().then(function(t){var a=t.data;e(a?h.actionCreators.changeLoginStatus(!0):h.actionCreators.changeLoginStatus(!1))}).catch(function(e){console.log(e)})},logout:function(){e(_.actionCreators.logout())},handleSearchChange:function(t){var a=t.target.value;e(_.actionCreators.changeSearchValue(a))},handleInputKeyDown:function(e,t){13===e.keyCode&&""!==t.trim()&&window.open(E.requestURL+"search?keyword="+(p.ISIE?encodeURIComponent(t):t),"_blank")},handleSearchClick:function(e,t){return""!==t.trim()||(e.preventDefault(),!1)}}})(y)},82:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SEARCH_FOCUS="search_focus",t.SEARCH_BLUR="search_blur",t.CHANGE_LIST="change_list",t.MOUSE_ENTER="mouse_enter",t.MOUSE_LEAVE="mouse_leave",t.SWITCH_PAGE="switch_page",t.CHANGE_SEARCHVALUE="change_searchvalue"},83:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CHANGE_USER_INFO="change_user_info",t.CHANGE_LOGIN_STATUS="change_login_status",t.CHANGE_MSG="change_msg",t.CHANGE_LOGGED_USER_INFO="change_logged_user_info"},95:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.actionCreators=t.constants=void 0;var n=a(267),r=o(a(82)),c=o(a(268));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.constants=r,t.actionCreators=c,t.reducer=n.reducer}},[[261,1,0]]]);