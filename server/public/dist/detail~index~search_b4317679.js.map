{"version":3,"sources":["webpack:///./src/common/header/store/actionTypes.js","webpack:///./src/pages/login/store/constants.js","webpack:///./src/common/config.js","webpack:///./src/common/header/store/reducer.js","webpack:///./src/common/header/store/actionCreators.js","webpack:///./src/pages/login/store/reducer.js","webpack:///./src/pages/login/store/actionCreators.js","webpack:///./src/statics/简书logo.png","webpack:///./src/common/header/index.js","webpack:///./src/pages/login/store/index.js","webpack:///./src/common/header/store/index.js","webpack:///./src/common/authentication.js"],"names":["SEARCH_FOCUS","SEARCH_BLUR","CHANGE_LIST","MOUSE_ENTER","MOUSE_LEAVE","SWITCH_PAGE","CHANGE_SEARCHVALUE","CHANGE_USER_INFO","CHANGE_LOGIN_STATUS","CHANGE_MSG","CHANGE_LOGGED_USER_INFO","requestURL","_immutable","__webpack_require__","constants","defalutState","fromJS","focused","mouseIn","list","page","totalPage","searchValue","reducer","state","arguments","length","undefined","action","type","set","merge","data","nextPage","value","_store","_config","search_focus_blur_action","getList","dispatch","axios","get","then","res","_res$data","success","Math","ceil","change_list_action","catch","err","console","log","mouseEnter","mouseLeave","switchPage","logout","_ref","code","actionCreators","changeLoginStatus","changeSearchValue","defaultState","loginStatus","msg","id","nickname","userInfo","username","password","remember","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_getIterator3","default","userData","next","done","_step$value","_slicedToArray3","key","setIn","return","status","defaults","withCredentials","changeMsg","changeLoggedUserInfo","changeUserInfo","loginFunctionalAC","post","module","exports","p","_reactRouterDom","_reactRedux","_reactTransitionGroup","_store2","_authentication","Header","showSearch","_this$props","_this","props","handleMouseEnter","handleMouseLeave","handleSwitchClick","JsList","toJS","pageList","i","push","_react2","createElement","className","Link","to","pathname","search","target","onMouseEnter","onMouseLeave","onClick","spinIcon","ref","icon","this","checkLogin","_props","handleInputFoucus","handleInputBlur","handleSearchChange","handleInputKeyDown","handleSearchClick","src","logoPic","CSSTransition","in","timeout","classNames","placeholder","onFocus","onBlur","onChange","onKeyDown","e","href","React","Component","connect","getIn","size","currentPage","spin","originAngle","style","transform","replace","_parseInt2","authentication","_ref2","loginActionCreators","_ref3","keyCode","trim","window","open","preventDefault","_reducer"],"mappings":"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","file":"detail~index~search_b4317679.js","sourcesContent":["const SEARCH_FOCUS = 'search_focus';\r\nconst SEARCH_BLUR = 'search_blur';\r\nconst CHANGE_LIST = 'change_list';\r\nconst MOUSE_ENTER = 'mouse_enter';\r\nconst MOUSE_LEAVE = 'mouse_leave';\r\nconst SWITCH_PAGE = 'switch_page';\r\nconst CHANGE_SEARCHVALUE = 'change_searchvalue';\r\n\r\nexport { SEARCH_FOCUS, SEARCH_BLUR, CHANGE_LIST, MOUSE_ENTER, MOUSE_LEAVE, SWITCH_PAGE, CHANGE_SEARCHVALUE };","const CHANGE_USER_INFO = 'change_user_info';\r\nconst CHANGE_LOGIN_STATUS = 'change_login_status';\r\nconst CHANGE_MSG = 'change_msg';\r\nconst CHANGE_LOGGED_USER_INFO = 'change_logged_user_info';\r\n\r\nexport { CHANGE_USER_INFO, CHANGE_LOGIN_STATUS, CHANGE_MSG, CHANGE_LOGGED_USER_INFO };","const requestURL = 'http://www.herosanctuary.com/';\r\n// const requestURL = 'http://123.206.55.41/';\r\n// const requestURL = 'http://locolhost:5499/';\r\nexport { requestURL };","import { fromJS } from \"immutable\";\r\nimport * as constants from \"./actionTypes\";\r\n\r\n//use immutable.js, use state.get/set\r\nconst defalutState = fromJS({\r\n  focused: false,\r\n  mouseIn: false,//serach area show or hide\r\n  list: [],//after useing fromJS, the 'list' has been convert to a 'immutable type', which I think it is a Set.\r\n  page: 1,\r\n  totalPage: 1,\r\n  searchValue: '',\r\n});\r\n\r\nconst reducer = (state = defalutState, action) => {\r\n  switch (action.type) {\r\n    case constants.SEARCH_FOCUS:\r\n      return state.set('focused', true);\r\n    case constants.SEARCH_BLUR:\r\n      return state.set('focused', false);\r\n    case constants.CHANGE_LIST:\r\n      return state.merge({\r\n        list: action.data,\r\n        totalPage: action.totalPage,\r\n      });\r\n    case constants.MOUSE_ENTER:\r\n      return state.set('mouseIn', true);\r\n    case constants.MOUSE_LEAVE:\r\n      return state.set('mouseIn', false);\r\n    case constants.SWITCH_PAGE:\r\n      return state.set('page', action.nextPage);\r\n    case constants.CHANGE_SEARCHVALUE:\r\n      return state.set('searchValue', action.value);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport { reducer };","import axios from \"axios\";\r\nimport { fromJS } from \"immutable\";\r\n\r\nimport * as constants from \"./actionTypes\";\r\n\r\nimport { actionCreators } from \"../../../pages/login/store\";\r\nimport { requestURL } from \"../../config\";\r\nconst change_list_action = (data) => {\r\n  return {\r\n    type: constants.CHANGE_LIST,\r\n    data: fromJS(data),\r\n    totalPage: Math.ceil(data.length / 10),\r\n  };\r\n};\r\n\r\nconst search_focus_blur_action = (type) => {\r\n  return {\r\n    type,\r\n  };\r\n};\r\nconst mouseEnter = () => {\r\n  return {\r\n    type: constants.MOUSE_ENTER,\r\n  };\r\n};\r\nconst mouseLeave = () => {\r\n  return {\r\n    type: constants.MOUSE_LEAVE,\r\n  };\r\n};\r\nconst switchPage = (nextPage) => {\r\n  return {\r\n    type: constants.SWITCH_PAGE,\r\n    nextPage,\r\n  };\r\n};\r\nconst changeSearchValue = (value) => ({\r\n  type: constants.CHANGE_SEARCHVALUE,\r\n  value,\r\n});\r\nconst getList = () => {\r\n  return function (dispatch) {\r\n    axios.get(`${requestURL}api/getList`).\r\n      then((res) => {\r\n        const { success, data } = res.data;\r\n        if (success) {\r\n          dispatch(change_list_action(data));\r\n        }\r\n      }).\r\n      catch((err) => {\r\n        console.log(err);\r\n      })\r\n\r\n  };\r\n};\r\nconst logout = () => {\r\n  return (dispatch) => {\r\n    axios.get(`${requestURL}user/logout`)\r\n      .then(({ data: { code } }) => {\r\n        if (code) {\r\n          dispatch(actionCreators.changeLoginStatus(false));\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\nexport { search_focus_blur_action, getList, mouseEnter, mouseLeave, switchPage, logout, changeSearchValue };","import { fromJS } from \"immutable\";\r\nimport * as constants from \"./constants\";\r\n\r\nconst defaultState = fromJS({\r\n  loginStatus: false,\r\n  msg: '',\r\n  id: 0,\r\n  nickname: '',\r\n  userInfo: {\r\n    username: '',\r\n    password: '',\r\n    remember: true,\r\n  },\r\n});\r\nconst reducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case constants.CHANGE_USER_INFO:\r\n      for (const [key, value] of action.userData) {\r\n        return state.setIn(['userInfo', key], value);\r\n      }\r\n      break;\r\n    case constants.CHANGE_LOGIN_STATUS:\r\n      return state.set('loginStatus', action.status);\r\n    case constants.CHANGE_MSG:\r\n      return state.set('msg', action.msg);\r\n    case constants.CHANGE_LOGGED_USER_INFO:\r\n      return state.merge({\r\n        id: action.id,\r\n        nickname: action.nickname,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport { reducer };","import * as constants from \"./constants\";\r\nimport { fromJS } from \"immutable\";\r\nimport axios from \"axios\";\r\nimport { requestURL } from \"../../../common/config\";\r\naxios.defaults.withCredentials = true;\r\n\r\nconst changeUserInfo = (userData) => {\r\n  return {\r\n    type: constants.CHANGE_USER_INFO,\r\n    userData: fromJS(userData),\r\n  };\r\n};\r\nconst changeLoginStatus = (status) => {\r\n  return {\r\n    type: constants.CHANGE_LOGIN_STATUS,\r\n    status,\r\n  };\r\n};\r\nconst changeMsg = (msg) => ({\r\n  type: constants.CHANGE_MSG,\r\n  msg,\r\n});\r\nconst changeLoggedUserInfo = (id, nickname) => ({\r\n  type: constants.CHANGE_LOGGED_USER_INFO,\r\n  id,\r\n  nickname,\r\n});\r\nconst loginFunctionalAC = (data) => {\r\n  return function (dispatch) {\r\n    axios.post(\r\n      `${requestURL}user/login`,\r\n      data,\r\n    )\r\n      .then(res => {\r\n        const { success, code, id, nickname } = res.data;\r\n        if (success) {\r\n          switch (code) {\r\n            case 0:\r\n              dispatch(changeMsg('登录成功！'));\r\n              dispatch(changeLoginStatus(true));\r\n              dispatch(changeLoggedUserInfo(id, nickname));\r\n              break;\r\n            case 1:\r\n              dispatch(changeMsg('用户名不存在'));\r\n              break;\r\n            case 2:\r\n              dispatch(changeMsg('密码错误'));\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      })\r\n      .catch();\r\n  };\r\n};\r\nexport { changeUserInfo, loginFunctionalAC, changeLoginStatus, changeMsg, changeLoggedUserInfo };","module.exports = __webpack_public_path__ + \"4c7bbafe27adc892f3046e6978459bac.png\";","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { actionCreators, constants } from \"./store\";\r\nimport { actionCreators as loginActionCreators } from \"../../pages/login/store\";\r\nimport { authentication } from \"../authentication\";\r\nimport \"./header.scss\";\r\nimport logoPic from \"../../statics/简书logo.png\";\r\nimport { requestURL } from \"../config\";\r\n//UI Header\r\nclass Header extends React.Component {\r\n  showSearch = () => {\r\n    const { focused, mouseIn, list, page, totalPage, handleMouseEnter, handleMouseLeave, handleSwitchClick } = this.props;\r\n    //list is still a immutable Object, must be converted to a JS Array.\r\n    const JsList = list.toJS();\r\n    const pageList = [];\r\n    if (JsList.length) {\r\n      // also ok!\r\n      // for (let i = page - 1; i < page; i++) {\r\n      //   for (let j = 10 * i; j < (page < totalPage ? 10 * page : JsList.length); j++) {\r\n      //     pageList.push(\r\n      //       <li className='contentItem' key={JsList[j]}>\r\n      //         <a className='contentItem_link'>{JsList[j]}</a>\r\n      //       </li>\r\n      //     );\r\n      //   }\r\n      // }\r\n\r\n      for (let i = (page - 1) * 10; i < (page < totalPage ? page * 10 : JsList.length); i++) {\r\n        pageList.push(\r\n          <li className='contentItem' key={JsList[i]}>\r\n            <Link className='contentItem_link' to={{\r\n              pathname: '/search',\r\n              search: `keyword=${JsList[i]}`,\r\n            }} target='_blank'>{JsList[i]}</Link>\r\n          </li>\r\n        );\r\n      }\r\n    }\r\n    if (focused || mouseIn) {\r\n      return (\r\n        <div className='search_info'\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}\r\n        >\r\n          <div className='search_wrapper'>\r\n            <div className='title'>\r\n              <span className='hot'>热门搜索</span>\r\n              <a className='switch' onClick={() => { handleSwitchClick(page, totalPage, this.spinIcon) }}>\r\n                <i ref={(icon) => { this.spinIcon = icon; }} className='iconfont icon-spinner9 spin'></i>\r\n                <span>换一批</span>\r\n              </a>\r\n            </div>\r\n            <ul className='content'>\r\n              {pageList}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    this.props.checkLogin();\r\n  }\r\n  render() {\r\n    const { loginStatus, focused, list, handleInputFoucus, handleInputBlur, logout, searchValue, handleSearchChange, handleInputKeyDown, handleSearchClick } = this.props;\r\n    return (\r\n      <header className='header'>\r\n        <nav className='nav_container'>\r\n          <ul className='nav'>\r\n            <li>\r\n              <Link className='logo' to='/'>\r\n                <img src={logoPic} className='logoPic'></img>\r\n              </Link>\r\n            </li>\r\n            <li className='nav_padding'></li>\r\n            <li className='nav_middle'>\r\n              {/* <a className='f17'>首页</a> */}\r\n              {/* <a className='f17'>下载APP</a> */}\r\n              <div className='nav_search_container'>\r\n                <div className='inputWrapper'>\r\n                  <CSSTransition in={focused} timeout={300} classNames='slide' >\r\n                    <input placeholder='搜索' onFocus={() => { handleInputFoucus(list) }} onBlur={handleInputBlur} value={searchValue} onChange={handleSearchChange} onKeyDown={(e) => { handleInputKeyDown(e, searchValue) }} />\r\n                  </CSSTransition>\r\n                  <CSSTransition in={focused} timeout={300} classNames='fade' >\r\n                    <a className='search_btn' href={`/search?keyword=${searchValue}`} onClick={(e) => { handleSearchClick(e, searchValue) }} target='_blank'><i className='iconfont icon-fangdajing'></i></a>\r\n                  </CSSTransition>\r\n                </div>\r\n                {this.showSearch(focused)}\r\n              </div>\r\n            </li>\r\n            <li className='nav_right'>\r\n              {/* <a><i className=\"iconfont icon-Aa\"></i></a> */}\r\n              {loginStatus ? <a onClick={logout}>退出</a> : <Link to='/login'>登录</Link>}\r\n              {loginStatus ? null : <Link className='signUp' to='/sign_up'>注册</Link>}\r\n              <Link className='write' to='/write'><i className=\"iconfont icon-icon-checkin\"></i>写文章</Link>\r\n            </li>\r\n          </ul>\r\n\r\n        </nav>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    focused: state.getIn(['header', 'focused']),\r\n    list: state.getIn(['header', 'list']),\r\n    page: state.getIn(['header', 'page']),\r\n    totalPage: state.getIn(['header', 'totalPage']),\r\n    mouseIn: state.getIn(['header', 'mouseIn']),\r\n    searchValue: state.getIn(['header', 'searchValue']),\r\n    loginStatus: state.getIn(['login', 'loginStatus']),\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    handleInputFoucus(list) {\r\n      if (list.size === 0) {\r\n        dispatch(actionCreators.getList());\r\n      }\r\n      dispatch(actionCreators.search_focus_blur_action(constants.SEARCH_FOCUS));\r\n    },\r\n    handleInputBlur() {\r\n      dispatch(actionCreators.search_focus_blur_action(constants.SEARCH_BLUR));\r\n    },\r\n    handleMouseEnter() {\r\n      dispatch(actionCreators.mouseEnter());\r\n    },\r\n    handleMouseLeave() {\r\n      dispatch(actionCreators.mouseLeave());\r\n    },\r\n    handleSwitchClick(currentPage, totalPage, spin) {\r\n      let originAngle = spin.style.transform.replace(/\\D/ig, '');\r\n      if (originAngle) {\r\n        originAngle = Number.parseInt(originAngle, 10);\r\n      } else {\r\n        originAngle = 0;\r\n      }\r\n      spin.style.transform = `rotate(${360 + originAngle}deg)`;\r\n      if (currentPage < totalPage) {\r\n        dispatch(actionCreators.switchPage(currentPage + 1));\r\n      } else {\r\n        dispatch(actionCreators.switchPage(1));\r\n      }\r\n    },\r\n    checkLogin() {\r\n      authentication()\r\n        .then(({ data: code }) => {\r\n          if (code) {\r\n            dispatch(loginActionCreators.changeLoginStatus(true));\r\n          } else {\r\n            dispatch(loginActionCreators.changeLoginStatus(false));\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        })\r\n    },\r\n    logout() {\r\n      dispatch(actionCreators.logout());\r\n    },\r\n    handleSearchChange({ target: { value } }) {\r\n      dispatch(actionCreators.changeSearchValue(value));\r\n    },\r\n    handleInputKeyDown(e, searchValue) {\r\n      if (e.keyCode === 13 && searchValue.trim() !== '') {\r\n        // window.open(`http://192.168.1.110:1001/search?keyword=${searchValue}`, '_blank');\r\n        window.open(`${requestURL}search?keyword=${searchValue}`, '_blank');\r\n      }\r\n    },\r\n    handleSearchClick(e, searchValue) {\r\n      if (searchValue.trim() === '') {\r\n        e.preventDefault();\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","import { reducer } from \"./reducer\";\r\nimport * as actionCreators from \"./actionCreators\";\r\nimport * as constants from \"./constants\";\r\n\r\nexport { reducer, actionCreators, constants };","import { reducer } from \"./reducer\";\r\nimport * as constants from \"./actionTypes\";\r\nimport * as actionCreators from \"./actionCreators\";\r\n\r\nexport {constants, actionCreators, reducer};","import axios from \"axios\";\r\nimport { requestURL } from \"./config\";\r\nconst authentication = () => {\r\n  return axios.get(`${requestURL}user/authentication`)\r\n};\r\nexport { authentication };"],"sourceRoot":""}