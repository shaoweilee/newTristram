{"version":3,"sources":["webpack:///./src/pages/home/store/index.js","webpack:///./src/pages/detail/store/reducer.js","webpack:///./src/pages/detail/store/actionCreators.js","webpack:///./src/pages/signup/store/constants.js","webpack:///./src/pages/write/store/constants.js","webpack:///./src/pages/search/store/reducer.js","webpack:///./src/pages/search/store/actionCreator.js","webpack:///./src/pages/home/store/actionTypes.js","webpack:///./src/index.js","webpack:///./src/App.js","webpack:///./src/pages/home/index.js","webpack:///./src/pages/home/store/reducer.js","webpack:///./src/pages/home/store/actionCreators.js","webpack:///./src/pages/home/components/focusimg/index.js","webpack:///./src/pages/home/components/topic/index.js","webpack:///./src/pages/home/components/list/index.js","webpack:///./src/pages/detail/loadable.index.js","webpack:///./src/pages/login/loadable.index.js","webpack:///./src/pages/signup/loadable.index.js","webpack:///./src/pages/write/loadable.index.js","webpack:///./src/pages/search/loadable.index.js","webpack:///./src/store/index.js","webpack:///./src/store/reducer.js","webpack:///./src/pages/write/store/index.js","webpack:///./src/pages/signup/store/reducer.js","webpack:///./src/pages/signup/store/actionCreators.js","webpack:///./src/pages/write/store/reducer.js","webpack:///./src/pages/detail/store/constants.js","webpack:///./src/pages/search/store/constants.js","webpack:///./src/pages/home/components/list/components/dumblist/index.js","webpack:///./src/pages/detail/store/index.js","webpack:///./src/pages/search/store/index.js","webpack:///./src/common/fullPageLoading/index.js","webpack:///./src/pages/signup/store/index.js","webpack:///./src/pages/write/store/actionCreators.js"],"names":["_reducer","__webpack_require__","actionCreators","reducer","_immutable","constants","defaultState","fromJS","authorNickname","title","content","createTime","updateTime","state","arguments","length","undefined","action","type","GET_DETAIL_DATA","merge","data","_config","getDetailDataFunctionAC","id","dispatch","axios","get","requestURL","then","res","_res$data","code","article","author","articleName","articleContent","nickname","getDetailDataAC","catch","err","console","log","CHANGE_USER_INPUT","SAVE_CURRENT_ARTICLE","SAVE_CURRENT_TITLE","CHANGE_STATUS","UPDATE_ARTICLES","UPDATE_CERTAIN_ARTICLE","DELETE_ARTICLE_AND_NOTEBOOK","articlelist","nextPage","showSearchResult","hasMore","keyword","searchType","ADD_PAGE","set","page","UPDATE_ARTICLES_IN_SEARCH","concat","articles","CHANGE_KEYWORD","CHANGE_SEARCH_RESULT_SHOW","CHANGE_HAS_MORE","searchAsyncAC","requestPage","location","search","_ref","_ref$data","users","usersWithoutRepeat","articlesWithNickname","map","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_getIterator3","default","next","done","_ref3","value","authorId","_extends3","return","updateArticlesAC","changeShowSearchResultAC","changeHasMore","currentPage","step","addPageAC","changeKeywordAndTypeAC","GET_WRITTER_LIST","CHANGE_WRITTER_LIST","GET_INITIAL_HOME_DATA","GET_MORE_ARTICLE","CHANGE_SCROLL_TOP_STATE","INCREASE_REQUEST_PAGE","CHANGE_HAS_MORE_IN_HOME","GET_ARTICLES","RESET_DATA","_App","ReactDOM","render","_react2","createElement","App","document","body","appendChild","_reactRedux","_reactRouterDom","_store","Provider","store","BrowserRouter","Fragment","Route","path","exact","component","Home","Login","SignUp","Detail","Write","Search","React","Component","_focusimg","bindEvents","window","addEventListener","_this","props","changeScrollShowState","this","getInitialData","resetData","removeEventListener","_header2","className","FocusImg","speed","imgWidth","loop","totalImgCount","imgSource","focusImgData","toJS","_topic2","_list2","backTopShow","onClick","scrollToTop","connect","getIn","getHomeData","scrollTo","documentElement","scrollTop","changeScrollShowStateAC","resetDataAC","defalutState","topicList","focusImg","recommendList","writterList","topic","getAsyncData","url","actionCreator","_len","rest","Array","_key","success","getWritterListActionCreator","getMoreListActionCreator","getWritterList","find","_ref2","getHomeDataActionCreator","getArticlesAC","changeHasMoreInHomeAC","curPage","increaseRequestPageAC","getMoreList","timer","imgContainer","imgItems","currentIndex","indicatorContainer","indicatorItems","runTimer","setInterval","imgContainerMove","setIndicatorAcitve","setState","targetIndex","style","transform","HandleIndicatorClick","e","target","tagName","clearInterval","index","getItemIndexInParent","handleMouseEnter","setTimeout","handleMouseLeave","handleArrowClick","test","thisOneWillDeactive","el","classList","contains","remove","add","parentElement","_children","querySelectorAll","_loop","toLowerCase","v","findIndex","item","currentTarget","_ret2","_typeof3","_this2","_this3","querySelector","nextProps","nextState","_this4","ref","ul","onMouseEnter","onMouseLeave","key","href","src","img","result","i","push","Math","random","Topic","Link","to","_dumblist","loadmore","DumbList","_fullPageLoading","LoadableComponent","_reactLoadable2","loader","t","bind","loading","FullPageLoading","Promise","all","_redux","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunk","_reduxImmutable","_store2","_store3","_store4","_store5","_store6","_store7","combineReducers","header","headerReducer","home","homeReducer","detail","detailReducer","login","loginReducer","signUp","signUpReducer","write","writeReducer","searchReducer","msg","username","password","buttonStatus","changeUserInput","signUpFunctionalAC","post","loginAC","changeLoginStatus","changeLoggedUserInfo","notebooks","notebookId","notebookName","articleId","showInput","createInputValue","articleBtnDisabled","currentSelectedNotebookId","currentArticleTitle","currentArticleContent","currentArticleId","requestArticleId","initOpen","editor","createType","autoSaving","pubPanelShow","modelOkText","setIn","jsState","_assign2","updateCertainArticle","_jsState$data","targetIndexInNotebooks","notebook","splice","targetIndexInArticles","deleteArticleAndNotebook","_spin2","size","changeStatus","updateCertainArticleAC","requestDataFunctionAC","_res$data2","saveArticleFunctionAC","hide","auto","_message3","info","saveNotebookFunctionAC","Date","toLocaleString","finished","error","autoSaveFunctionAC","_res$data3","updateType","getNotesDetailAsyncAC","_res$data4","_res$data4$article","publishAsyncAC","publishSite","deleteArticleAndNotebookAsyncAC","deleteArticleAndNotebookAC"],"mappings":"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","file":"index_73ee7798.js","sourcesContent":["import { reducer } from \"./reducer\";\r\nimport * as actionCreators from \"./actionCreators\";\r\n\r\n\r\nexport { reducer, actionCreators };","import { fromJS } from \"immutable\";\r\nimport * as constants from \"./constants\";\r\n\r\nconst defaultState = fromJS({\r\n  authorNickname: '',\r\n  title: '',\r\n  content: '',\r\n  createTime: '',\r\n  updateTime: '',\r\n});\r\n\r\nconst reducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case constants.GET_DETAIL_DATA:\r\n      return state.merge({\r\n        authorNickname: fromJS(action.data.authorNickname),\r\n        title: fromJS(action.data.title),\r\n        content: fromJS(action.data.content),\r\n        createTime: fromJS(action.data.createTime),\r\n        updateTime: fromJS(action.data.updateTime),\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport { reducer };","\r\nimport axios from \"axios\";\r\nimport * as constants from \"./constants\";\r\nimport { requestURL } from \"../../../common/config\";\r\nconst getDetailDataAC = (data) => {\r\n  return {\r\n    type: constants.GET_DETAIL_DATA,\r\n    data,\r\n  };\r\n};\r\nconst getDetailDataFunctionAC = (id) => {\r\n  return function (dispatch) {\r\n    axios.get(`${requestURL}getDetail?articleId=${id}`)\r\n      .then(res => {\r\n        const { code, article, author } = res.data;\r\n        switch (code) {\r\n          case 0:\r\n            break;\r\n          case 1:\r\n            {\r\n              const { articleName: title, articleContent: content, createTime, updateTime } = article;\r\n              const { nickname: authorNickname } = author;\r\n              dispatch(getDetailDataAC(\r\n                {\r\n                  authorNickname,\r\n                  title,\r\n                  content,\r\n                  createTime,\r\n                  updateTime,\r\n                }\r\n              ));\r\n            }\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\n\r\n\r\nexport { getDetailDataFunctionAC };","const CHANGE_USER_INPUT = 'change_user_input';\r\nexport { CHANGE_USER_INPUT };","const SAVE_CURRENT_ARTICLE = 'save_current_article';\r\nconst SAVE_CURRENT_TITLE = 'save_current_title';\r\nconst CHANGE_STATUS = 'change_status';\r\nconst UPDATE_ARTICLES = 'update_articles';\r\nconst UPDATE_CERTAIN_ARTICLE = 'update_certain_article';\r\nconst DELETE_ARTICLE_AND_NOTEBOOK = 'delete_article_and_notebook';\r\nexport { SAVE_CURRENT_ARTICLE, SAVE_CURRENT_TITLE, CHANGE_STATUS, UPDATE_ARTICLES, UPDATE_CERTAIN_ARTICLE, DELETE_ARTICLE_AND_NOTEBOOK };","import { fromJS } from \"immutable\";\r\nimport * as constants from \"./constants\";\r\n\r\nconst defaultState = fromJS({\r\n  articlelist: [],\r\n  nextPage: 0,\r\n  showSearchResult: true,\r\n  hasMore: true,\r\n  keyword: '',\r\n  searchType: 'keyword',\r\n});\r\n\r\nconst reducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case constants.ADD_PAGE:\r\n      return state.set('nextPage', action.page);\r\n    case constants.UPDATE_ARTICLES_IN_SEARCH:\r\n      return state.set('articlelist', state.get('articlelist').concat(fromJS(action.articles)));\r\n    case constants.CHANGE_KEYWORD:\r\n      // return state.set('keyword', action.keyword);\r\n      return state.merge({\r\n        searchType: action.searchType,\r\n        keyword: action.keyword,\r\n      });\r\n    case constants.CHANGE_SEARCH_RESULT_SHOW:\r\n      return state.set('showSearchResult', action.showSearchResult);\r\n    case constants.CHANGE_HAS_MORE:\r\n      return state.set('hasMore', action.hasMore);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport { reducer };","import axios from \"axios\";\r\nimport * as constants from \"./constants\";\r\nimport { requestURL } from \"../../../common/config\";\r\nconst addPageAC = (currentPage, step) => ({\r\n  type: constants.ADD_PAGE,\r\n  page: currentPage + step,\r\n});\r\nconst updateArticlesAC = (articles) => ({\r\n  type: constants.UPDATE_ARTICLES_IN_SEARCH,\r\n  articles,\r\n});\r\nconst changeKeywordAndTypeAC = (searchType, keyword) => ({\r\n  type: constants.CHANGE_KEYWORD,\r\n  searchType,\r\n  keyword,\r\n});\r\nconst changeShowSearchResultAC = (showSearchResult) => ({\r\n  type: constants.CHANGE_SEARCH_RESULT_SHOW,\r\n  showSearchResult,\r\n});\r\nconst changeHasMore = (hasMore) => ({\r\n  type: constants.CHANGE_HAS_MORE,\r\n  hasMore,\r\n});\r\nconst searchAsyncAC = (requestPage) => {\r\n  return function (dispatch) {\r\n    axios.get(`${requestURL}search/search${location.search}&page=${requestPage}`)\r\n      .then(({ data: { code, articles, usersWithoutRepeat: users } }) => {\r\n        switch (code) {\r\n          case 1:\r\n            {\r\n              const articlesWithNickname = articles.map((article) => {\r\n                for (const { id, nickname } of users) {\r\n                  if (article.nickname === undefined && article.authorId === id) {\r\n                    return { ...article, nickname };\r\n                  }\r\n                }\r\n              });\r\n              dispatch(updateArticlesAC(articlesWithNickname));\r\n            }\r\n            break;\r\n          case 0:\r\n            if (requestPage === 0) {//第一次请求就没有查找到。\r\n              dispatch(changeShowSearchResultAC(false));\r\n            }\r\n            dispatch(changeHasMore(false));\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n    dispatch(addPageAC(requestPage, 1));\r\n  };\r\n};\r\n\r\nexport { searchAsyncAC, changeKeywordAndTypeAC };","const GET_WRITTER_LIST = 'get_writter_list';\r\nconst CHANGE_WRITTER_LIST = 'change_writter_list';\r\nconst GET_INITIAL_HOME_DATA = 'get_initial_home_data';\r\nconst GET_MORE_ARTICLE = 'get_more_article';\r\nconst CHANGE_SCROLL_TOP_STATE = 'change_scroll_top_state';\r\nconst INCREASE_REQUEST_PAGE = 'increase_request_page';\r\nconst CHANGE_HAS_MORE_IN_HOME = 'change_has_more_in_home';\r\nconst GET_ARTICLES = 'get_articles';\r\nconst RESET_DATA = 'reset_data';\r\nexport { GET_WRITTER_LIST, CHANGE_WRITTER_LIST, GET_INITIAL_HOME_DATA, GET_MORE_ARTICLE, CHANGE_SCROLL_TOP_STATE, INCREASE_REQUEST_PAGE, CHANGE_HAS_MORE_IN_HOME, GET_ARTICLES, RESET_DATA };","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport { App } from \"./App\";\r\nimport \"./common.scss\";\r\nimport \"./statics/iconfont/iconfont.scss\";\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.body\r\n    .appendChild(document.createElement('main'))\r\n);","import React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter, Route } from \"react-router-dom\";\r\n\r\n// import Header from \"./common/header\";\r\nimport Home from \"./pages/home\";\r\n// import Detail from \"./pages/detail\";//使用loadable之后，需要加载的是异步组件\r\nimport Detail from \"./pages/detail/loadable.index\";//使用loadable之后，需要加载的是异步组件\r\nimport Login from \"./pages/login/loadable.index\";\r\nimport SignUp from \"./pages/signup/loadable.index\";\r\nimport Write from \"./pages/write/loadable.index\";\r\nimport Search from \"./pages/search/loadable.index\";\r\nimport { store } from \"./store\";\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n      <Provider store={store}>\r\n        <BrowserRouter>\r\n          <React.Fragment>\r\n            {/* <Header /> */}\r\n            <Route path='/' exact component={Home}></Route>{/*path为/ 不能加exact属性。 */}\r\n            <Route path='/login' exact component={Login}></Route>\r\n            <Route path='/sign_up' exact component={SignUp}></Route>\r\n            <Route path='/detail/:id' exact component={Detail}></Route>\r\n            <Route path='/write' exact component={Write}></Route>\r\n            <Route path='/search' exact component={Search}></Route>\r\n          </React.Fragment>\r\n        </BrowserRouter>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport { App };","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { actionCreators } from \"./store\";\r\nimport Header from \"../../common/header\";\r\nimport { FocusImg } from \"./components/focusimg\";\r\nimport Topic from \"./components/topic\";\r\nimport List from \"./components/list\";\r\n// import Recommend from \"./components/recommend\";\r\n// import Writter from \"./components/writter\";\r\n\r\nimport \"./home.scss\";\r\n\r\nclass Home extends React.Component {\r\n\r\n  componentWillMount() {\r\n    this.props.getInitialData(this.props.requestPage);\r\n  }\r\n  componentDidMount() {\r\n    this.bindEvents();\r\n  }\r\n  bindEvents = () => {\r\n    window.addEventListener('scroll', this.props.changeScrollShowState);\r\n  }\r\n  componentWillUnmount() {\r\n    this.props.resetData();\r\n    window.removeEventListener('scroll', this.props.changeScrollShowState);\r\n  }\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Header />\r\n        <div className='content_container'>\r\n          <section className='content_left'>\r\n            <FocusImg\r\n              speed={2000}\r\n              imgWidth={625}\r\n              loop={true}\r\n              totalImgCount={3}\r\n              imgSource={this.props.focusImgData.toJS()}\r\n            />\r\n            <Topic />\r\n            <List />\r\n          </section>\r\n          {/* <aside className='content_right'>\r\n            <Recommend />\r\n            <Writter />\r\n          </aside> */}\r\n          {\r\n            this.props.backTopShow ?\r\n              (<div className='backTop'>\r\n                <a className='backTop_btn' onClick={this.props.scrollToTop}>\r\n                  <div className='backTop_btn_content'></div>\r\n                </a>\r\n              </div>) : null\r\n          }\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state) => {\r\n  return {\r\n    backTopShow: state.getIn(['home', 'backTopShow']),\r\n    requestPage: state.getIn(['home', 'nextPage']),\r\n    focusImgData: state.getIn(['home', 'focusImg']),\r\n  };\r\n};\r\n\r\nconst mapDispatch = (dispatch) => {\r\n  return {\r\n    getInitialData(requestPage) {\r\n      dispatch(actionCreators.getHomeData(requestPage));\r\n    },\r\n    scrollToTop() {\r\n      window.scrollTo(0, 0);\r\n    },\r\n    changeScrollShowState() {\r\n      if (document.documentElement.scrollTop > 300) {\r\n        dispatch(actionCreators.changeScrollShowStateAC(true));\r\n      } else {\r\n        dispatch(actionCreators.changeScrollShowStateAC(false));\r\n      }\r\n    },\r\n    resetData() {\r\n      dispatch(actionCreators.resetDataAC());\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapState, mapDispatch)(Home);","import { fromJS } from \"immutable\";\r\nimport * as constants from \"./actionTypes\";\r\n\r\n//use immutable.js, use state.get/set\r\nconst defalutState = fromJS({\r\n  topicList: [],\r\n  articlelist: [],\r\n  focusImg: [],\r\n  recommendList: [],\r\n  writterList: [],\r\n  nextPage: 0,\r\n  backTopShow: false,\r\n  hasMore: true,\r\n});\r\n\r\nconst reducer = (state = defalutState, action) => {\r\n  switch (action.type) {\r\n    case constants.CHANGE_WRITTER_LIST:\r\n      return state.set('writterList', action.data);\r\n    case constants.GET_INITIAL_HOME_DATA:\r\n      return state.merge({\r\n        topicList: state.get('topicList').concat(fromJS(action.topic)),\r\n        articlelist: state.get('articlelist').concat(fromJS(action.articles)),\r\n        focusImg: state.get('focusImg').concat(fromJS(action.focusImg)),\r\n        // recommendList: fromJS(action.data.recommendList),\r\n        // writterList: fromJS(action.data.writterList),\r\n      });\r\n    case constants.GET_MORE_ARTICLE:\r\n      return state.merge({\r\n        articlelist: state.get('articlelist').concat(action.data),\r\n        nextPage: action.nextPage,\r\n      });\r\n    case constants.CHANGE_SCROLL_TOP_STATE:\r\n      return state.set('backTopShow', action.state);\r\n    case constants.INCREASE_REQUEST_PAGE:\r\n      return state.set('nextPage', action.page);\r\n    case constants.CHANGE_HAS_MORE_IN_HOME:\r\n      return state.set('hasMore', action.hasMore);\r\n    case constants.RESET_DATA:\r\n      return state.merge({\r\n        nextPage: 0,\r\n        topicList: fromJS([]),\r\n        articlelist: fromJS([]),\r\n        focusImg: fromJS([]),\r\n      });\r\n    case constants.GET_ARTICLES:\r\n      return state.set('articlelist', state.get('articlelist').concat(action.articles));\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport { reducer };","import axios from \"axios\";\r\n\r\nimport * as constants from \"./actionTypes\";\r\nimport { fromJS } from \"immutable\";\r\nimport { requestURL } from \"../../../common/config\";\r\n\r\nconst getAsyncData = (url, dispatch, actionCreator, ...rest) => {\r\n  axios.get(url)\r\n    .then(res => {\r\n      const { success, data } = res.data;\r\n      if (success) {\r\n        const action = actionCreator(data, ...rest);\r\n        dispatch(action);\r\n      }\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nconst getWritterListActionCreator = (data) => {\r\n  return {\r\n    type: constants.CHANGE_WRITTER_LIST,\r\n    data: fromJS(data),\r\n  };\r\n}\r\n\r\nconst getHomeDataActionCreator = (articles, topic, focusImg) => {\r\n  return {\r\n    type: constants.GET_INITIAL_HOME_DATA,\r\n    articles,\r\n    topic,\r\n    focusImg,\r\n  };\r\n};\r\nconst getMoreListActionCreator = (data, currentPage) => {\r\n  return {\r\n    type: constants.GET_MORE_ARTICLE,\r\n    data: fromJS(data),\r\n    nextPage: currentPage + 1,\r\n  };\r\n};\r\nconst getArticlesAC = (articles) => ({\r\n  type: constants.GET_ARTICLES,\r\n  articles: fromJS(articles),\r\n});\r\nconst increaseRequestPageAC = (curPage, step) => ({\r\n  type: constants.INCREASE_REQUEST_PAGE,\r\n  page: curPage + step,\r\n});\r\nconst changeHasMoreInHomeAC = (hasMore) => ({\r\n  type: constants.CHANGE_HAS_MORE_IN_HOME,\r\n  hasMore,\r\n});\r\nconst resetDataAC = () => ({\r\n  type: constants.RESET_DATA,\r\n});\r\nconst getMoreList = (requestPage) => {\r\n  return function (dispatch) {\r\n    getAsyncData(`http://localhost:5499/api/morehomelist?page=${requestPage}`, dispatch, getMoreListActionCreator, requestPage);\r\n  };\r\n};\r\nconst getHomeData = (requestPage) => {\r\n  return function (dispatch) {//get home articles\r\n    axios.get(`${requestURL}api/homeArticles?page=${requestPage}`)\r\n      .then(({ data: { code, articles, users, topic, focusImg } }) => {\r\n        switch (code) {\r\n          case 1:\r\n            {\r\n              const articlesWithNickname = articles.map((article) => {\r\n                const { nickname } = users.find(({ id }) => id === article.authorId);\r\n                return { ...article, nickname };\r\n              });\r\n              if (topic !== undefined) {\r\n                dispatch(getHomeDataActionCreator(articlesWithNickname, topic, focusImg));\r\n              } else {\r\n                dispatch(getArticlesAC(articlesWithNickname));\r\n              }\r\n            }\r\n            break;\r\n          case 0:\r\n            dispatch(changeHasMoreInHomeAC(false));\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n    dispatch(increaseRequestPageAC(requestPage, 1));\r\n  };\r\n};\r\n// const getHomeData = () => {\r\n//   return function (dispatch) {\r\n//     getAsyncData('http://localhost:5499/api/homeData', dispatch, getHomeDataActionCreator);\r\n//   };\r\n// };\r\nconst getWritterList = () => {\r\n  return function (dispatch) {\r\n    getAsyncData('http://localhost:5499/api/writterList', dispatch, getWritterListActionCreator);\r\n  };\r\n};\r\n\r\nconst changeScrollShowStateAC = (state) => {\r\n  return {\r\n    type: constants.CHANGE_SCROLL_TOP_STATE,\r\n    state,\r\n  };\r\n};\r\nexport { getWritterList, getHomeData, getMoreList, changeScrollShowStateAC, resetDataAC };","import React from \"react\";\r\n\r\nimport \"./FocusImg.scss\";\r\n\r\nclass FocusImg extends React.Component {\r\n  state = {\r\n    timer: null,\r\n    imgContainer: null,\r\n    imgItems: null,\r\n    currentIndex: 0,\r\n    indicatorContainer: null,\r\n    indicatorItems: null,\r\n  }\r\n  componentDidMount() {\r\n    this.setState(\r\n      {\r\n        imgItems: [...this.state.imgContainer.querySelectorAll('li')],\r\n        indicatorItems: [...this.state.indicatorContainer.querySelectorAll('li')],\r\n      },\r\n      () => {\r\n        this.setIndicatorAcitve(this.state.currentIndex);\r\n      }\r\n    );\r\n    this.runTimer();\r\n\r\n  }\r\n  componentWillUnmount() {\r\n    clearInterval(this.state.timer);\r\n  }\r\n  runTimer = (currentIndex = 0) => {\r\n    const timer = setInterval(() => {\r\n      currentIndex = currentIndex === this.props.totalImgCount - 1 ? 0 : currentIndex + 1;\r\n      this.imgContainerMove(currentIndex);\r\n      this.setIndicatorAcitve(currentIndex);\r\n      this.setState({ currentIndex });\r\n    }, this.props.speed);\r\n\r\n    this.setState({\r\n      timer: timer,\r\n    });\r\n  }\r\n  imgContainerMove = (targetIndex) => {\r\n    this.state.imgContainer.style.transform = `translateX(${-this.props.imgWidth * targetIndex}px)`;\r\n  }\r\n  HandleIndicatorClick = (e) => {\r\n    if (e.target.tagName !== 'LI') {\r\n      return false;\r\n    }\r\n    clearInterval(this.state.timer);\r\n    let index = this.getItemIndexInParent(this.state.indicatorContainer, 'li', e);\r\n    this.imgContainerMove(index);\r\n    this.setIndicatorAcitve(index);\r\n    this.setState({\r\n      currentIndex: index,\r\n    });\r\n    this.runTimer(index);\r\n  }\r\n  handleMouseEnter = (e) => {\r\n    setTimeout(() => {\r\n      clearInterval(this.state.timer);\r\n    }, 0);\r\n  }\r\n  handleMouseLeave = () => {\r\n    this.runTimer(this.state.currentIndex);\r\n  }\r\n\r\n  handleArrowClick = (e) => {\r\n    let targetIndex = 0;\r\n    if (/left/.test(e.target.className)) {\r\n      if (this.props.loop) {\r\n        targetIndex = this.state.currentIndex - 1 < 0 ? this.props.totalImgCount - 1 : this.state.currentIndex - 1;//loop\r\n      } else {\r\n        targetIndex = this.state.currentIndex - 1 < 0 ? 0 : this.state.currentIndex - 1;//no-loop\r\n      }\r\n    } else {\r\n      if (this.props.loop) {\r\n        targetIndex = this.state.currentIndex + 1 >= this.props.totalImgCount ? 0 : this.state.currentIndex + 1;//loop\r\n      } else {\r\n        targetIndex = this.state.currentIndex + 1 >= this.props.totalImgCount ? this.props.totalImgCount - 1 : this.state.currentIndex + 1;//no-loop\r\n      }\r\n    }\r\n    this.imgContainerMove(targetIndex);\r\n    this.setIndicatorAcitve(targetIndex);\r\n    this.setState({\r\n      currentIndex: targetIndex,\r\n    });\r\n  }\r\n  setIndicatorAcitve = (currentIndex = 0, indicatorItems = this.state.indicatorItems) => {\r\n    const thisOneWillDeactive = indicatorItems.find((el) => {\r\n      return el.classList.contains('active');\r\n    });\r\n    if (thisOneWillDeactive) {\r\n      thisOneWillDeactive.classList.remove('active');\r\n    }\r\n    indicatorItems[currentIndex].classList.add('active');\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.setState({\r\n      indicatorContainer: document.querySelector('.foucsImg_indicator'),\r\n      indicatorItems: [...document.querySelectorAll('.indicator_item')],\r\n    },\r\n      () => {\r\n        this.setIndicatorAcitve(this.state.currentIndex)\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 工具函数----使用场景：在一个事件委托中，找出目标元素在父元素中的下标。\r\n   * @static 轮播图组件FocusImg的静态函数 / 类的函数\r\n   * @param {Element} parentElement 父元素\r\n   * @param {String} tagName 目标元素标签名，小写~\r\n   * @param {Event} e 事件对象\r\n   * @returns {Number} 数字，目标元素在父元素中的下标\r\n   */\r\n  getItemIndexInParent = (parentElement, tagName, e) => {\r\n    const _children = [...parentElement.querySelectorAll(tagName)];\r\n    for (let el = e.target; el !== e.currentTarget; el = el.parentElement) {\r\n      if (el.tagName.toLowerCase() === tagName) {\r\n        return _children.findIndex((item) => item === el);\r\n      }\r\n    }\r\n  }\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextProps.imgSource === this.props.imgSource && nextState.indicatorContainer === this.state.indicatorContainer) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  render() {\r\n    return (\r\n      <section className='banner_foucsImg'>\r\n        <ul className='foucsImg_container' ref={(ul) => { this.state.imgContainer = ul }}\r\n          onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}\r\n        >\r\n          {\r\n            this.props.imgSource.map((item) => {\r\n              return (\r\n                <li className='foucsImg_item' key={item.id}>\r\n                  <a href={`/detail/${item.id}`} target='_blank' className='foucsImg_link'><img src={item.img} className='banner_img' /></a>\r\n                </li>\r\n              );\r\n            })\r\n          }\r\n        </ul>\r\n        <ul className='foucsImg_indicator' onClick={this.HandleIndicatorClick} ref={(ul) => { this.state.indicatorContainer = ul }}>\r\n          {\r\n            (() => {\r\n              const result = [];\r\n              for (let i = 0; i < this.props.totalImgCount; i++) {\r\n                result.push(<li className='indicator_item' key={Math.random()}></li>);\r\n              }\r\n              return result;\r\n            })()\r\n          }\r\n        </ul>\r\n        <div className='arrow_left switchControl' onClick={this.handleArrowClick} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>&lt;</div>\r\n        <div className='arrow_right switchControl' onClick={this.handleArrowClick} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>&gt;</div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport { FocusImg };","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./index.scss\";\r\n\r\nclass Topic extends React.Component {\r\n  render() {\r\n    const { topicList } = this.props;\r\n    return (\r\n      <section className='topic_container'>\r\n        <ul className='topic_list'>\r\n          {\r\n            topicList.map((item) => {\r\n              return <li className='topic_item' key={item.get('id')}><Link className='topic_link' to={`/search?category=${item.get('title')}`} target='_blank'><img src={item.get('img')} className='topic_img' /><span className='topic_text'>{item.get('title')}</span></Link></li>;\r\n            })\r\n          }\r\n          {/* <li className='topic_item'><a className='topic_link'><span className='topic_text'>更多热门分类></span></a></li> */}\r\n        </ul>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapState = (state) => {\r\n  return {\r\n    topicList: state.getIn(['home', 'topicList']),\r\n  };\r\n};\r\n\r\nexport default connect(mapState, null)(Topic);","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { actionCreators } from \"../../store\";\r\nimport { DumbList } from \"./components/dumblist\";\r\n\r\n\r\n// class List extends React.Component {\r\n//   render() {\r\n//     return <DumbList {...this.props} />;\r\n//   }\r\n// }\r\n\r\nconst List = (props) => <DumbList {...props} />;\r\n\r\nconst mapState = (state) => {\r\n  return {\r\n    articlelist: state.getIn(['home', 'articlelist']),\r\n    requestPage: state.getIn(['home', 'nextPage']),\r\n    hasMore: state.getIn(['home', 'hasMore']),\r\n  };\r\n};\r\nconst mapDispatch = (dispatch) => {\r\n  return {\r\n    loadmore(requestPage) {\r\n      dispatch(actionCreators.getHomeData(requestPage));\r\n    }\r\n  };\r\n};\r\nexport default connect(mapState, mapDispatch)(List);","import React from \"react\";\r\nimport Loadable from \"react-loadable\";\r\nimport { FullPageLoading } from \"../../common/fullPageLoading\";\r\n\r\nconst LoadableComponent = Loadable({\r\n  loader: () => import('./'),\r\n  loading() {\r\n    return <FullPageLoading />\r\n  },\r\n});\r\n\r\nexport default () => <LoadableComponent />","import React from \"react\";\r\nimport Loadable from \"react-loadable\";\r\nimport { FullPageLoading } from \"../../common/fullPageLoading\";\r\n\r\nconst LoadableComponent = Loadable({\r\n  loader: () => import('./'),\r\n  loading() {\r\n    return <FullPageLoading />\r\n  },\r\n});\r\n\r\nexport default () => <LoadableComponent />","import React from \"react\";\r\nimport Loadable from \"react-loadable\";\r\nimport { FullPageLoading } from \"../../common/fullPageLoading\";\r\n\r\n\r\nconst LoadableComponent = Loadable({\r\n  loader: () => import('./'),\r\n  loading() {\r\n    return <FullPageLoading />\r\n  },\r\n});\r\n\r\nexport default () => <LoadableComponent />","import React from \"react\";\r\nimport Loadable from \"react-loadable\";\r\nimport { FullPageLoading } from \"../../common/fullPageLoading\";\r\n\r\n\r\nconst LoadableComponent = Loadable({\r\n  loader: () => import('./'),\r\n  loading() {\r\n    return <FullPageLoading />\r\n  },\r\n});\r\n\r\nexport default () => <LoadableComponent />","import React from \"react\";\r\nimport Loadable from \"react-loadable\";\r\nimport { FullPageLoading } from \"../../common/fullPageLoading\";\r\n\r\n\r\nconst LoadableComponent = Loadable({\r\n  loader: () => import('./'),\r\n  loading() {\r\n    return <FullPageLoading />\r\n  },\r\n});\r\n\r\nexport default () => <LoadableComponent />","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport reducer from \"./reducer\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducer, composeEnhancers(\r\n  applyMiddleware(thunk)\r\n));\r\n\r\nexport { store };\r\n","//this file combine reducers to a BIG reducer, then export it.\r\n// import { combineReducers } from \"redux\";\r\n\r\n//use redux-immutable to uniform state types.\r\nimport { combineReducers } from \"redux-immutable\";\r\nimport { reducer as headerReducer } from \"../common/header/store\";\r\nimport { reducer as homeReducer } from \"../pages/home/store\";\r\nimport { reducer as detailReducer } from \"../pages/detail/store\";\r\nimport { reducer as loginReducer } from \"../pages/login/store\";\r\nimport { reducer as signUpReducer } from \"../pages/signup/store\";\r\nimport { reducer as writeReducer } from \"../pages/write/store\";\r\nimport { reducer as searchReducer } from \"../pages/search/store\";\r\n\r\nexport default combineReducers({\r\n  header: headerReducer,\r\n  home: homeReducer,\r\n  detail: detailReducer,\r\n  login: loginReducer,\r\n  signUp: signUpReducer,\r\n  write: writeReducer,\r\n  search: searchReducer,\r\n});","import { reducer } from \"./reducer\";\r\nimport * as actionCreators from \"./actionCreators\";\r\nimport * as constants from \"./constants\";\r\n\r\nexport { reducer, actionCreators, constants };","import { fromJS } from \"immutable\";\r\n\r\nimport * as constants from \"./constants\";\r\n\r\nconst defaultState = fromJS({\r\n  msg: '',\r\n  nickname: '',\r\n  username: '',\r\n  password: '',\r\n  buttonStatus: '注册'\r\n});\r\n\r\nconst reducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case constants.CHANGE_USER_INPUT:\r\n      return state.set(action.key, action.value);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport { reducer };","import axios from \"axios\";\r\nimport { actionCreators as loginAC } from \"../../login/store\";\r\nimport * as constants from \"./constants\";\r\nimport { requestURL } from \"../../../common/config\";\r\nconst changeUserInput = (key, value) => {\r\n  return {\r\n    type: constants.CHANGE_USER_INPUT,\r\n    key,\r\n    value,\r\n  };\r\n};\r\n\r\nconst signUpFunctionalAC = (nickname, username, password) => {\r\n  const data = { nickname, username, password };\r\n  return function (dispatch) {\r\n    axios.post(\r\n      `${requestURL}user/sign_up`,//url\r\n      data\r\n    )\r\n      .then(res => {\r\n        const { success, id, code } = res.data;\r\n        if (success) {\r\n          switch (code) {\r\n            case 1:\r\n              dispatch(changeUserInput('msg', `用户名重复，sorry！`));\r\n              dispatch(changeUserInput('buttonStatus', '注册'));\r\n              setTimeout(() => {\r\n                dispatch(changeUserInput('msg', ``));\r\n              }, 2000);\r\n              break;\r\n            case 0:\r\n              dispatch(changeUserInput('msg', `注册成功，欢迎你，${nickname}！正在跳转至首页···`));\r\n              dispatch(loginAC.changeLoginStatus(true));\r\n              dispatch(loginAC.changeLoggedUserInfo(id, nickname));\r\n              dispatch(changeUserInput('buttonStatus', '注册'));\r\n              break;\r\n          }\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\nexport { changeUserInput, signUpFunctionalAC };","import { fromJS } from \"immutable\";\r\n\r\nimport * as constants from \"./constants\";\r\n\r\nconst defaultState = fromJS({\r\n  data: {\r\n    notebooks: [\r\n      { notebookId: 0, notebookName: '加载中……' },\r\n    ],\r\n    articles: [\r\n      { articleId: 1, notebookId: 0, articleName: '加载中……' },\r\n    ],\r\n  },\r\n  showInput: false,\r\n  createInputValue: '',\r\n  articleBtnDisabled: true,\r\n  currentSelectedNotebookId: 0,\r\n  currentArticleTitle: '',\r\n  currentArticleContent: '',\r\n  currentArticleId: 0,\r\n  requestArticleId: 0,\r\n  initOpen: true,\r\n  editor: null,\r\n  loading: false,\r\n  createType: 'note',\r\n  autoSaving: false,\r\n  pubPanelShow: false,\r\n  modelOkText: '发布',\r\n});\r\n\r\nconst updateCertainArticle = (state, article) => {\r\n  // const result = state.getIn(['data', 'articles'])\r\n  //   .filter((value, key) => {\r\n  //     return value.get('articleId') === articleId;\r\n  //   })//过滤出来的是个List，对应数组\r\n  //   .first();\r\n  // const afterMerge = result.merge({ articleContent });\r\n  // const result1 = state.getIn(['data', 'articles']).merge(afterMerge);\r\n  // console.log(afterMerge);\r\n  // console.log(result1);\r\n  const jsState = state.toJS();\r\n  const { data: { articles } } = jsState;\r\n  // const targetIndex = articles.findIndex((value) => value.articleId === articleId);\r\n  let target = articles.find((value) => value.articleId === article.articleId);\r\n  Object.assign(target, article);\r\n  // const newState = {\r\n  //   ...jsState,\r\n  //   data: {\r\n  //     ...data,\r\n  //     articles: [\r\n  //       ...articles.slice(0, targetIndex),\r\n  //       article,\r\n  //       ...articles.slice(targetIndex + 1)\r\n  //     ],\r\n  //   }\r\n  // };\r\n  return fromJS(jsState);\r\n};\r\nconst deleteArticleAndNotebook = (state, articleId, notebookId) => {\r\n  const jsState = state.toJS();\r\n  const { data: { articles, notebooks } } = jsState;\r\n  if (notebookId) {\r\n    const targetIndexInNotebooks = notebooks.findIndex((notebook) => notebook.notebookId === notebookId);\r\n    notebooks.splice(targetIndexInNotebooks, 1);\r\n  }\r\n  const targetIndexInArticles = articles.findIndex((article) => article.articleId === articleId);\r\n  articles.splice(targetIndexInArticles, 1);\r\n  return fromJS(jsState);\r\n};\r\nconst reducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case constants.SAVE_CURRENT_ARTICLE:\r\n      return state.setIn(['currentArticle', 'articleId'], action.id).setIn(['currentArticle', 'content'], action.content);\r\n    case constants.SAVE_CURRENT_TITLE:\r\n      return state.setIn(['currentArticle', 'articleId'], action.id).setIn(['currentArticle', 'title'], action.title);\r\n    case constants.CHANGE_STATUS:\r\n      return state.set(action.key, action.value);\r\n    case constants.UPDATE_ARTICLES:\r\n      return state.setIn(['data', 'articles'], action.articles);\r\n    case constants.UPDATE_CERTAIN_ARTICLE:\r\n      return updateCertainArticle(state, action.article);\r\n    case constants.DELETE_ARTICLE_AND_NOTEBOOK:\r\n      return deleteArticleAndNotebook(state, action.articleId, action.notebookId);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport { reducer };","const GET_DETAIL_DATA = 'get_detail_data';\r\n\r\nexport { GET_DETAIL_DATA };","const ADD_PAGE = 'add_page';\r\nconst UPDATE_ARTICLES_IN_SEARCH = 'update_articles_in_search';\r\nconst CHANGE_KEYWORD = 'change_keyword';\r\nconst CHANGE_SEARCH_RESULT_SHOW = 'change_search_result_show';\r\nconst CHANGE_HAS_MORE = 'change_has_more';\r\n\r\nexport { ADD_PAGE, UPDATE_ARTICLES_IN_SEARCH, CHANGE_KEYWORD, CHANGE_SEARCH_RESULT_SHOW, CHANGE_HAS_MORE };","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./index.scss\";\r\n\r\n/**\r\n * \r\n * @param {object} props props对象，需要包含articlelist，loadmore，requestPage。\r\n */\r\nconst DumbList = (props) => (\r\n  <section className='articlelist_container'>\r\n    <ul className='articlelist_list'>\r\n      {\r\n        props.articlelist.map((item, index) => {\r\n          return (\r\n            // <li className='articlelist_Item' key={item.get('id')}>\r\n            <li className='articlelist_Item' key={index}>\r\n              <div className='articlelist_summary'>\r\n                {/* <a className='summary_title' target='_blank'>{item.get('title')}</a> */}\r\n                <Link to={`/detail/${item.get('articleId')}`} className='summary_title' target='_blank'>{item.get('articleName')}</Link>\r\n                <p className='summary_content'>{item.get('description')}</p>\r\n                <div className='summary_extraInfo'>\r\n                  <a className='extraInfo_author' target='_blank'>{item.get('nickname')}</a>\r\n                  <span className='extraInfo_comments' target='_blank'><span className='iconfont icon-duihuakuang1'>创作于{item.get('createTime')}</span></span>\r\n                  {\r\n                    item.get('updateTime') ? <span className='extraInfo_likes'><span className='iconfont icon-xin'>更新于{item.get('updateTime')}</span></span> : null\r\n                  }\r\n                  {/* {item.get('donatesCount') ? <span className='extraInfo_donates'><span className='iconfont icon-renminbi'>{item.get('donatesCount')}</span></span> : null} */}\r\n                </div>\r\n              </div>\r\n              {/* {\r\n                item.get('imgUrl') ?\r\n                  (<a className='articlelist_link' target='_blank'>\r\n                    <img alt='' className='articlelist_img' src='https://upload-images.jianshu.io/upload_images/1096130-83e32b3e990f4c91.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/300/h/240' />\r\n                  </a>) :\r\n                  null\r\n              } */}\r\n            </li>\r\n          );\r\n        })\r\n      }\r\n    </ul>\r\n    {\r\n      props.hasMore ?\r\n        <a className='articlelist_loadmore' onClick={() => { props.loadmore(props.requestPage); }}>阅读更多</a>\r\n        :\r\n        <a className='articlelist_loadmore'>没有更多啦！</a>\r\n    }\r\n  </section>\r\n);\r\n\r\nexport { DumbList };","import { reducer } from \"./reducer\";\r\nimport * as actionCreators from \"./actionCreators\";\r\nimport * as constants from \"./constants\";\r\n\r\nexport { reducer, actionCreators, constants };","import { reducer } from \"./reducer\";\r\nimport * as actionCreators from \"./actionCreator\";\r\nimport * as constants from \"./constants\";\r\n\r\nexport { reducer, actionCreators, constants };","import React from \"react\";\r\nimport { Spin } from \"antd\";\r\nimport \"./index.scss\";\r\n\r\nconst FullPageLoading = () => {\r\n  return (\r\n    <div className='loading_container'>\r\n      <Spin size='large' />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport { FullPageLoading };","import { reducer } from \"./reducer\";\r\nimport * as actionCreators from \"./actionCreators\";\r\nimport * as constants from \"./constants\";\r\n\r\nexport { reducer, actionCreators, constants };","import axios from \"axios\";\r\nimport { message } from \"antd\";\r\n\r\nimport * as constants from \"./constants\";\r\nimport { fromJS } from \"immutable\";\r\nimport { requestURL } from \"../../../common/config\";\r\nconst changeStatus = (key, value) => ({\r\n  type: constants.CHANGE_STATUS,\r\n  key,\r\n  value,\r\n});\r\nconst updateArticlesAC = (articles) => {\r\n  return {\r\n    type: constants.UPDATE_ARTICLES,\r\n    articles,\r\n  };\r\n};\r\n/**\r\n * 更新本地state中，单篇文章的状态\r\n * @param {object} article \r\n */\r\nconst updateCertainArticleAC = (article) => {\r\n  return {\r\n    type: constants.UPDATE_CERTAIN_ARTICLE,\r\n    article,\r\n  };\r\n};\r\n\r\nconst deleteArticleAndNotebookAC = (articleId, notebookId) => ({\r\n  type: constants.DELETE_ARTICLE_AND_NOTEBOOK,\r\n  articleId,\r\n  notebookId,\r\n});\r\n/**\r\n * 创建文集\r\n * @param {*} hide \r\n * @param {*} notebookName \r\n */\r\nconst saveNotebookFunctionAC = (hide, notebookName) => {\r\n  return function (dispatch) {\r\n    axios.post(\r\n      `${requestURL}write/saveNotebook`,//url\r\n      { notebookName }\r\n    )\r\n      .then(res => {\r\n        const { success, code, notebookId } = res.data;\r\n        if (success) {\r\n          switch (code) {\r\n            case 0:\r\n              hide();\r\n              message.success('创建成功！', 3);\r\n              dispatch(requestDataFunctionAC());\r\n              dispatch(saveArticleFunctionAC(//创建文集成功之后，自动新建一篇文章\r\n                message.info('为新文集自动创建文章……'),\r\n                {\r\n                  notebookId,\r\n                  articleName: new Date().toLocaleString(),\r\n                  articleContent: '',\r\n                  finished: false,\r\n                },\r\n                true\r\n              ));\r\n              break;\r\n            case 1:\r\n              hide();\r\n              message.error('创建失败！原因：文集名重复', 3);\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\n/**\r\n * 请求所有文章数据\r\n */\r\nconst requestDataFunctionAC = () => {\r\n  return function (dispatch) {\r\n    axios.get(\r\n      `${requestURL}write/getNotes`,//url\r\n    )\r\n      .then(res => {\r\n        const { success, notebooks, articles } = res.data;\r\n        if (success) {\r\n          dispatch(changeStatus('data', fromJS({ notebooks, articles })));\r\n        }\r\n      })\r\n      .catch();\r\n  };\r\n};\r\n/**\r\n * 创建文章\r\n * @param {*} hide \r\n * @param {*} data \r\n * @param {*} auto \r\n */\r\nconst saveArticleFunctionAC = (hide, data, auto) => {\r\n  return function (dispatch) {\r\n    axios.post(\r\n      `${requestURL}write/saveArticle`,//url\r\n      data\r\n    )\r\n      .then(({ data: { success, code, articles, articleId } }) => {\r\n        if (success) {\r\n          switch (code) {\r\n            case 0:\r\n              // if (!auto) {\r\n              //   dispatch(changeStatus('currentArticleId', articleId));//如果是手动创建的新文章，就把当前在编辑的文章ID切换为新创建的，方便后续操作。\r\n              // }\r\n              hide();\r\n              dispatch(updateArticlesAC(fromJS(articles)));//创建完成后，更新文章列表；这里服务器端要优化一下字段，现在是所有文章整体都返回了。\r\n              message.info(`已${auto ? '自动' : ''}创建新文章！`, 3);\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\n/**\r\n * 自动保存文章\r\n * @param {*} data \r\n */\r\nconst autoSaveFunctionAC = (data) => {\r\n  return (dispatch) => {\r\n    dispatch(changeStatus('autoSaving', true));\r\n    axios.post(\r\n      `${requestURL}write/autoSave`,\r\n      data,\r\n    )\r\n      .then(res => {\r\n        const { success, code } = res.data;\r\n        if (success) {\r\n          switch (code) {\r\n            case 1:\r\n              dispatch(changeStatus('autoSaving', false));\r\n              if (data.updateType === 'finished') {\r\n                dispatch(updateCertainArticleAC({ articleId: data.articleId, finished: data.finished }));\r\n              }\r\n              break;\r\n            case 0:\r\n              console.log('更新失败，文章不存在');\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\n/**\r\n * 异步获取单篇文章内容\r\n * @param {*} articleId \r\n * @param {*} editor \r\n */\r\nconst getNotesDetailAsyncAC = (articleId, editor) => {\r\n  return (dispatch) => {\r\n    dispatch(changeStatus('loading', true));\r\n    dispatch(changeStatus('requestArticleId', articleId));\r\n    axios.get(\r\n      `${requestURL}write/getDetail?articleId=${articleId}`,\r\n    )\r\n      .then(res => {\r\n        const { success, article, article: { articleName, articleContent } } = res.data;\r\n        if (success) {//获取后，应当更新本地state中，该篇文章的内容。\r\n          // dispatch(changeStatus('currentArticleContent', articleContent));//useless\r\n          dispatch(updateCertainArticleAC(article));\r\n          dispatch(changeStatus('loading', false));\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\n\r\nconst publishAsyncAC = (data) => {\r\n  return (dispatch) => {\r\n    dispatch(changeStatus('modelOkText', '发布中……'));\r\n    axios.post(\r\n      `${requestURL}write/publish`,\r\n      data\r\n    )\r\n      .then(res => {\r\n        dispatch(updateCertainArticleAC({ ...data, finished: true, publishSite: res.data.publishSite }));\r\n        dispatch(changeStatus('pubPanelShow', false));\r\n        dispatch(changeStatus('modelOkText', '发布'));\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\nconst deleteArticleAndNotebookAsyncAC = (articleId, notebookId = 0) => {\r\n  const hide = message.loading(`正在删除${notebookId ? '文集独子' : '文章'}`);\r\n  return (dispatch) => {\r\n    axios.get(\r\n      notebookId ?\r\n        `${requestURL}write/delArticle?articleId=${articleId}&notebookId=${notebookId}`\r\n        :\r\n        `${requestURL}write/delArticle?articleId=${articleId}`\r\n    )\r\n      .then(res => {\r\n        dispatch(changeStatus('currentArticleId', 0));\r\n        dispatch(changeStatus('initOpen', true));\r\n        dispatch(deleteArticleAndNotebookAC(articleId, notebookId));\r\n        hide();\r\n        message.info(notebookId ? '删除成功，所属文集也删除了！' : '删除成功！', 2);\r\n      })\r\n      .catch();\r\n  };\r\n};\r\nexport { changeStatus, saveNotebookFunctionAC, requestDataFunctionAC, saveArticleFunctionAC, autoSaveFunctionAC, getNotesDetailAsyncAC, updateCertainArticleAC, publishAsyncAC, deleteArticleAndNotebookAsyncAC };"],"sourceRoot":""}